var tadpole={};tadpole.VERSION="0.0.0";tadpole.STATE="alpha";(function(a){a.fn.tadpole=function(e,b,c){var d=a(window).data("tadpole");if(e=="init"||d===undefined){if(d==undefined){d=new tadpole.UI(a(this),b,c,(a.browser.mozilla||false));a(window).resize(function(){d.resize()});setInterval(function(){d.loop()},120000);d.build()}a(window).data("tadpole",d)}if(e!="init"&&e!=undefined){e="jq_"+e;if(e in d){d[e](a(this),c)}}return d}})(jQuery);replaceAll=function(c,b,a){return c.split(b).join(a)};Object.size=function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b};Object.steal=function(d,c){for(var e in c){if(!d.hasOwnProperty(e)&&!c.hasOwnProperty(e)){continue}if(typeof d[e]=="object"){d[e]=Object.extend(d[e],c[e])}else{d[e]=c[e]}}};Object.extend=function(d,c){var e={};Object.steal(e,d);Object.steal(e,c);return e};function zeroPad(b,a){a=a||2;a-=b.toString().length;if(a>0){return new Array(a+(/\./.test(b)?2:1)).join("0")+b}return b+""}function formatTime(b,a){a=a||new Date();
HH=a.getHours();hh=HH;b=replaceAll(b,"{mm}",zeroPad(a.getMinutes(),2));b=replaceAll(b,"{ss}",zeroPad(a.getSeconds(),2));mr="am";if(hh>11){mr="pm";if(hh>12){hh=hh-12}}else{if(hh==0){hh="12"}}b=replaceAll(b,"{hh}",zeroPad(hh,2));b=replaceAll(b,"{HH}",zeroPad(HH,2));b=replaceAll(b,"{mr}",mr);return b}tadpole.UI=function(b,a,c,d){this.client=a;this.options=c;this.mozilla=d;a.settings.agent="tadpole/"+tadpole.VERSION+" "+a.settings.agent;this.LIB="tadpole";this.VERSION=tadpole.VERSION;this.STATE=tadpole.STATE;b.append('<div class="tadpole"></div>');this.view=b.find(".tadpole");this.control=null;this.top=null;this.menu=null;this.book=null};tadpole.UI.prototype.build=function(){this.top=new tadpole.Top(this);this.book=new tadpole.Book(this);this.control=new tadpole.Control(this)};tadpole.Top=function(a){this.manager=a;this.build()};tadpole.Top.prototype.build=function(){this.manager.view.append('<div class="top"><a class="menubutton" href="#">+</a> <span>Tadpole</span></div>');this.view=this.manager.view.find(".top");
this.button=this.view.find(".menubutton");this.label=this.view.find("span");this.button.click(function(a){a.preventDefault()})};tadpole.Control=function(a){this.manager=a;this.build()};tadpole.Control.prototype.build=function(){this.manager.view.append('<div class="control"><input type="text" class="msg"></input></div>');this.view=this.manager.view.find("div.control");this.input=this.view.find("input");this.input.width(this.view.width()-20)};tadpole.Book=function(a){this.manager=a;this.clist={};this.build()};tadpole.Book.prototype.build=function(){this.manager.view.append('<div class="book"></div>');this.view=this.manager.view.find("div.book")};tadpole.Book.prototype.add_channel=function(b,a){var c=new tadpole.Channel(b,a,this.manager,this);this.clist[b.toLowerCase]=c;return c};tadpole.Channel=function(c,b,d,a){this.manager=d;this.book=a;this.ns=c;this.raw=b;this.hidden=true;this.background=false;this.build()};tadpole.Channel.prototype.build=function(){this.book.view.append('<div class="channel" id="'+this.raw+'"><ul class="log"></ul></div>');
this.view=this.book.view.find("div.channel#"+this.raw);this.logview=this.view.find("ul.log")};tadpole.Channel.prototype.reveal=function(){if(!this.hidden){return}if(this.background){return}this.view.css({display:"block"});this.hidden=false};tadpole.Channel.prototype.hide=function(){if(this.hidden){return}this.view.css({display:"none"});this.hidden=true};tadpole.Channel.prototype.log=function(d){var b=new Date();var c=formatTime("{HH}:{mm}:{ss}",b);var a=b.getTime();this.logview.append('<li id="'+a+'"><span class="timestamp">'+c+'</span><span class="content">'+d+"</span></li>");return this.logview.find("li#"+a)};tadpole.Channel.prototype.join=function(a){this.log('<p class="background"><strong class="event join">** '+a+" joined *</strong></p>")};tadpole.Channel.prototype.part=function(a,b){this.log('<p class="background"><strong class="event part">** '+a+" left *</strong> "+b+"</p>")};tadpole.Channel.prototype.message=function(a,b){var c=this.log('<h2 class="username">'+a+"</h2><p>"+b+"</p>");
console.log(c)};tadpole.Channel.prototype.action=function(a,b){this.log('<p><em><strong class="username">* '+a+"</strong> "+b+"</em></p>")};tadpole.Channel.prototype.kick=function(a,c,b){this.log('<p><em><strong class="event kick">** '+a+" kicked by "+c+" *</strong> "+b+"</em></p>")};