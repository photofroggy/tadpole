function zeroPad(a,b){return b=b||2,b-=a.toString().length,b>0?new Array(b+(/\./.test(a)?2:1)).join("0")+a:a+""}function formatTime(a,b){return b=b||new Date,HH=b.getHours(),hh=HH,a=replaceAll(a,"{mm}",zeroPad(b.getMinutes(),2)),a=replaceAll(a,"{ss}",zeroPad(b.getSeconds(),2)),mr="am",hh>11?(mr="pm",hh>12&&(hh-=12)):0==hh&&(hh="12"),a=replaceAll(a,"{hh}",zeroPad(hh,2)),a=replaceAll(a,"{HH}",zeroPad(HH,2)),a=replaceAll(a,"{mr}",mr)}var tadpole={};tadpole.VERSION="0.0.1",tadpole.STATE="alpha",function(a){a.fn.tadpole=function(b,c,d){var e=a(window).data("tadpole");return("init"==b||void 0===e)&&(void 0==e&&(e=new tadpole.UI(a(this),c,d,a.browser.mozilla||!1),a(window).resize(function(){e.resize()}),setInterval(function(){e.loop()},12e4),e.build()),a(window).data("tadpole",e)),"init"!=b&&void 0!=b&&(b="jq_"+b,b in e&&e[b](a(this),d)),e}}(jQuery),replaceAll=function(a,b,c){return a.split(b).join(c)},Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},Object.steal=function(a,b){for(var c in b)(a.hasOwnProperty(c)||b.hasOwnProperty(c))&&(a[c]="object"==typeof a[c]?Object.extend(a[c],b[c]):b[c])},Object.extend=function(a,b){var c={};return Object.steal(c,a),Object.steal(c,b),c},tadpole.UI=function(a,b,c,d){this.client=b,this.options=c,this.mozilla=d,b.settings.agent="tadpole/"+tadpole.VERSION+" "+b.settings.agent,this.LIB="tadpole",this.VERSION=tadpole.VERSION,this.STATE=tadpole.STATE,a.append('<div class="tadpole"></div>'),this.view=a.find(".tadpole"),this.control=null,this.top=null,this.menu=null,this.book=null},tadpole.UI.prototype.build=function(){this.top=new tadpole.Top(this),this.book=new tadpole.Book(this),this.control=new tadpole.Control(this)},tadpole.UI.prototype.resize=function(){},tadpole.UI.prototype.loop=function(){},tadpole.Book=function(a){this.manager=a,this.clist={},this.build()},tadpole.Book.prototype.build=function(){this.manager.view.append('<div class="book"></div>'),this.view=this.manager.view.find("div.book")},tadpole.Book.prototype.add=function(a,b){var c=new tadpole.Channel(a,b,this.manager,this);return this.clist[a.toLowerCase]=c,c},tadpole.Channel=function(a,b,c,d){this.manager=c,this.book=d,this.ns=a,this.raw=b,this.selector=replaceAll(this.raw,"pchat:","c-pchat-"),this.selector=replaceAll(this.selector,"chat:","c-chat-"),this.hidden=!0,this.background=!1,this.build()},tadpole.Channel.prototype.build=function(){this.book.view.append('<div class="channel" id="'+this.selector+'"><ul class="log"></ul></div>'),this.view=this.book.view.find("div.channel#"+this.selector),this.logview=this.view.find("ul.log")},tadpole.Channel.prototype.reveal=function(){this.hidden&&(this.background||(this.view.css({display:"block"}),this.hidden=!1,this.manager.top.set_label(this.ns)))},tadpole.Channel.prototype.hide=function(){this.hidden||(this.view.css({display:"none"}),this.hidden=!0)},tadpole.Channel.prototype.log=function(a){var b=new Date,c=formatTime("{HH}:{mm}:{ss}",b),d=b.getTime();return this.logview.append('<li id="'+d+'"><span class="timestamp">'+c+'</span><span class="content">'+a+"</span></li>"),this.logview.find("li#"+d)},tadpole.Channel.prototype.join=function(a){this.log('<p class="background"><strong class="event join">** '+a+" joined *</strong></p>")},tadpole.Channel.prototype.part=function(a,b){this.log('<p class="background"><strong class="event part">** '+a+" left *</strong> "+b+"</p>")},tadpole.Channel.prototype.message=function(a,b){var c=this.log('<h2 class="username">'+a+"</h2><p>"+b+"</p>");console.log(c)},tadpole.Channel.prototype.action=function(a,b){this.log('<p><em><strong class="username">* '+a+"</strong> "+b+"</em></p>")},tadpole.Channel.prototype.kick=function(a,b,c){this.log('<p><em><strong class="event kick">** '+a+" kicked by "+b+" *</strong> "+c+"</em></p>")},tadpole.Control=function(a){this.manager=a,this.build()},tadpole.Control.prototype.build=function(){this.manager.view.append('<div class="control"><input type="text" class="msg"></input></div>'),this.view=this.manager.view.find("div.control"),this.input=this.view.find("input"),this.input.width(this.view.width()-20)},tadpole.Top=function(a){this.manager=a,this.build()},tadpole.Top.prototype.build=function(){this.manager.view.append('<div class="top"><a class="menubutton" href="#">+</a> <span>Tadpole</span></div>'),this.view=this.manager.view.find(".top"),this.button=this.view.find(".menubutton"),this.label=this.view.find("span"),this.button.click(function(a){a.preventDefault()})},tadpole.Top.prototype.set_label=function(a){this.label.html(a)};